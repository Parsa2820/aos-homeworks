\documentclass{article}

\usepackage{graphicx}
\usepackage{listings}
\usepackage{float}

\usepackage{xepersian}
\settextfont{XB Zar}

\title{تمرین سری اول درس سیستم‌های عامل پیشرفته}
\author{پارسا محمدیان -- 98102284}
\date{\today}

\begin{document}
\maketitle

\section*{تئوری}
\section{}

\section*{عملی}
\setcounter{section}{0}
\section{}
\subsection{}
\subsubsection{}
کد مربوط به این بخش در فایل 
\lr{1.1.c}
موجود است. همچنین اسکریپت اجرای آن در فایل
\lr{1.1.sh}
قرار دارد.

در تصویر زیر مشاهده می‌کنیم که اسکریپت اجرا شده است.
خروجی کامل اسکریپت را در ادامه می‌بینیم.

\begin{figure}[H]
\centering
\includegraphics[width=\textwidth]{1.1.png}
\caption{خروجی اجرای اسکریپت}
\label{fig:1.1}
\end{figure}

\begin{latin}
\begin{lstlisting}
Running 1.1
Running with page size 4096
Compiling with page size 4096
Running alef
thread_a: allocating 4096B memory
thread_a: allocated 4096B memory
thread_d: reading shared pointer
thread_d: hello world
thread_d: read shared pointer
thread_b: protecting shared pointer from read
thread_b: protected shared pointer from read
thread_c: reading shared pointer
thread_c: hello world
thread_c: read shared pointer

 Performance counter stats for './1.1 alef':

                65      page-faults:u                                                         
               332      dTLB-load-misses:u               #    0.89% of all dTLB cache accesses
            37,425      dTLB-loads:u                                                          
            14,689      dTLB-stores:u                                                         

       0.001628487 seconds time elapsed

       0.001765000 seconds user
       0.000000000 seconds sys


-----------------
Running be
thread_a: allocating 4096B memory
thread_a: allocated 4096B memory
thread_c: reading shared pointer
thread_c: hello world
thread_b: protecting shared pointer from read
thread_d: writing to shared pointer
thread_c: read shared pointer
thread_b: protected shared pointer from read
./1.1: Segmentation fault

 Performance counter stats for './1.1 be':

                64      page-faults:u                                                         
               304      dTLB-load-misses:u               #    0.84% of all dTLB cache accesses
            36,375      dTLB-loads:u                                                          
            14,057      dTLB-stores:u                                                         

       0.158606399 seconds time elapsed

       0.000000000 seconds user
       0.012408000 seconds sys


-----------------
Running jim
thread_a: allocating 4096B memory
thread_a: allocated 4096B memory
thread_d: writing to shared pointer
thread_d: wrote to shared pointer
thread_b: protecting shared pointer from read
thread_c: writing to shared pointer
thread_b: protected shared pointer from read
./1.1: Segmentation fault

 Performance counter stats for './1.1 jim':

                62      page-faults:u                                                         
               332      dTLB-load-misses:u               #    0.92% of all dTLB cache accesses
            36,252      dTLB-loads:u                                                          
            13,943      dTLB-stores:u                                                         

       0.124682004 seconds time elapsed

       0.000000000 seconds user
       0.009419000 seconds sys


-----------------
Running with page size 1024
Compiling with page size 1024
Running alef
thread_a: allocating 1024B memory
thread_a: allocated 1024B memory
thread_d: reading shared pointer
thread_d: hello world
thread_d: read shared pointer
thread_b: protecting shared pointer from read
thread_c: reading shared pointer
thread_c: hello world
thread_c: read shared pointer
thread_b: protected shared pointer from read

 Performance counter stats for './1.1 alef':

                63      page-faults:u                                                         
               354      dTLB-load-misses:u               #    0.95% of all dTLB cache accesses
            37,429      dTLB-loads:u                                                          
            14,711      dTLB-stores:u                                                         

       0.001630073 seconds time elapsed

       0.000000000 seconds user
       0.001795000 seconds sys


-----------------
Running be
thread_a: allocating 1024B memory
thread_a: allocated 1024B memory
thread_d: writing to shared pointer
thread_d: wrote to shared pointer
thread_b: protecting shared pointer from read
thread_b: protected shared pointer from read
thread_c: reading shared pointer
thread_c: thread_d was here
thread_c: read shared pointer

 Performance counter stats for './1.1 be':

                64      page-faults:u                                                         
               331      dTLB-load-misses:u               #    0.89% of all dTLB cache accesses
            37,251      dTLB-loads:u                                                          
            14,555      dTLB-stores:u                                                         

       0.001191988 seconds time elapsed

       0.000000000 seconds user
       0.001367000 seconds sys


-----------------
Running jim
thread_a: allocating 1024B memory
thread_a: allocated 1024B memory
thread_c: writing to shared pointer
thread_c: wrote to shared pointer
thread_b: protecting shared pointer from read
thread_b: protected shared pointer from read
thread_d: writing to shared pointer
./1.1: Segmentation fault

 Performance counter stats for './1.1 jim':

                67      page-faults:u                                                         
               324      dTLB-load-misses:u               #    0.90% of all dTLB cache accesses
            36,151      dTLB-loads:u                                                          
            13,968      dTLB-stores:u                                                         

       0.124665005 seconds time elapsed

       0.000000000 seconds user
       0.008697000 seconds sys
\end{lstlisting}
\end{latin}

\subsubsection{}
\subsubsection{}
\subsubsection{}
\subsection{}
\subsection{}
\subsubsection{}
کد مربوط به این بخش در فایل 
\lr{1.3.c}
قرار دارد. همچنین اسکریپت اجرای آن در فایل 
\lr{1.3.sh}
قرار دارد.

در تصویر 
\ref{fig:1.3}
مشاهده می‌کنیم که این اسکریپت اجرا شده است. 
خروجی آن را در ادامه می‌بینیم. 

\begin{figure}[H]
\centering
\includegraphics[width=\textwidth]{1.3.png}
\caption{خروجی اجرای اسکریپت}
\label{fig:1.3}
\end{figure}

\begin{latin}
\begin{lstlisting}
Running 1.3 with 1 threads

 Performance counter stats for './1.3':

                53      page-faults:u                                                         
             6,313      cache-misses:u                                                        
               167      dTLB-load-misses:u               #    0.52% of all dTLB cache accesses
            31,950      dTLB-loads:u                                                          
            11,341      dTLB-stores:u                                                         

       0.000851952 seconds time elapsed

       0.000867000 seconds user
       0.000000000 seconds sys


-----------------
Running 1.3 with 2 threads

 Performance counter stats for './1.3':

                51      page-faults:u                                                         
             6,226      cache-misses:u                                                        
               159      dTLB-load-misses:u               #    0.50% of all dTLB cache accesses
            31,950      dTLB-loads:u                                                          
            11,341      dTLB-stores:u                                                         

       0.000786024 seconds time elapsed

       0.000811000 seconds user
       0.000000000 seconds sys


-----------------
Running 1.3 with 3 threads

 Performance counter stats for './1.3':

                53      page-faults:u                                                         
             5,643      cache-misses:u                                                        
               164      dTLB-load-misses:u               #    0.51% of all dTLB cache accesses
            31,950      dTLB-loads:u                                                          
            11,341      dTLB-stores:u                                                         

       0.000748116 seconds time elapsed

       0.000756000 seconds user
       0.000000000 seconds sys


-----------------
Running 1.3 with 4 threads

 Performance counter stats for './1.3':

                53      page-faults:u                                                         
             5,510      cache-misses:u                                                        
               157      dTLB-load-misses:u               #    0.49% of all dTLB cache accesses
            31,921      dTLB-loads:u                                                          
            11,341      dTLB-stores:u                                                         

       0.001029236 seconds time elapsed

       0.001070000 seconds user
       0.000000000 seconds sys


-----------------
Running 1.3 with 5 threads

 Performance counter stats for './1.3':

                52      page-faults:u                                                         
             5,868      cache-misses:u                                                        
               159      dTLB-load-misses:u               #    0.50% of all dTLB cache accesses
            31,950      dTLB-loads:u                                                          
            11,341      dTLB-stores:u                                                         

       0.000757058 seconds time elapsed

       0.000747000 seconds user
       0.000000000 seconds sys


-----------------
Running 1.3 with 6 threads

 Performance counter stats for './1.3':

                51      page-faults:u                                                         
             6,439      cache-misses:u                                                        
               162      dTLB-load-misses:u               #    0.51% of all dTLB cache accesses
            31,950      dTLB-loads:u                                                          
            11,341      dTLB-stores:u                                                         

       0.000781736 seconds time elapsed

       0.000827000 seconds user
       0.000000000 seconds sys


-----------------
Running 1.3 with 7 threads

 Performance counter stats for './1.3':

                52      page-faults:u                                                         
             3,688      cache-misses:u                                                        
               161      dTLB-load-misses:u               #    0.50% of all dTLB cache accesses
            31,950      dTLB-loads:u                                                          
            11,341      dTLB-stores:u                                                         

       0.000675503 seconds time elapsed

       0.000679000 seconds user
       0.000000000 seconds sys


----------------- 
\end{lstlisting}
\end{latin}

\subsubsection{}
کد مربوط به این نمودار و نمودار قسمت بعد در فایل 
\lr{1.3.py}
موجود است. 

تصویر این نمودار در اینجا قابل مشاهده است. 
\begin{figure}[H]
\centering
\includegraphics[width=\textwidth]{1.3-plot-1.png}
\caption{نمودار تاثیر تعداد ریسمان‌ها بر پارامترها}
\end{figure}

\subsubsection{}
نمودار خواسته شده در شکل زیر قابل مشاهده است. 

\begin{figure}[H]
\centering
\includegraphics[width=\textwidth]{1.3-plot-2.png}
\caption{نمودار تاثیر تعداد ریسمان‌ها بر تاخیر زمان اجرای برنامه}
\end{figure}

\end{document}